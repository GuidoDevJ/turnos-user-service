generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id              Int           @id @default(autoincrement())
  firebaseUid     String        @unique @map("firebase_uid") @db.VarChar(128)
  username        String        @unique @db.VarChar(50)
  email           String        @unique @db.VarChar(255)
  firstName       String        @map("first_name") @db.VarChar(100)
  lastName        String        @map("last_name") @db.VarChar(100)
  phone           String?       @db.VarChar(20)
  address         String?
  roleId          Int           @map("role_id")
  isActive        Boolean       @default(true) @map("is_active")
  isVerified      Boolean       @default(false) @map("is_verified")
  emailVerifiedAt DateTime?     @map("email_verified_at")
  createdAt       DateTime      @default(now()) @map("created_at")
  updatedAt       DateTime      @default(now()) @updatedAt @map("updated_at")

  client          Client?
  professional    Professional?

  @@index([roleId])
  @@index([isActive])
  @@map("users")
}

model Client {
  id                     Int      @id @default(autoincrement())
  userId                 Int      @unique @map("user_id")
  user                   User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  preferredPaymentMethod String?  @map("preferred_payment_method") @db.VarChar(50)
  loyaltyPoints          Int      @default(0) @map("loyalty_points")
  notes                  String?

  createdAt              DateTime @default(now()) @map("created_at")
  updatedAt              DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("clients")
}

model Professional {
  id              Int      @id @default(autoincrement())
  userId          Int      @unique @map("user_id")
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  bio             String?
  specialization  String?  @db.VarChar(100)
  licenseNumber   String?  @unique @map("license_number") @db.VarChar(50)
  yearsExperience Int?     @map("years_experience")
  isAvailable     Boolean  @default(true) @map("is_available")

  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("professionals")
}
